{
  "version": "1.0",
  "description": "PEBL Bundle Build Configuration - defines all data bundles to be created",

  "bundles": {
    "core": {
      "name": "pebl2",
      "type": "core",
      "description": "PEBL core runtime (library and media only, NO tests)",
      "output_dir": "bin",
      "includes": [
        {
          "path": "emscripten/pebl-lib",
          "mount": "/usr/local/share/pebl2/pebl-lib",
          "description": "PEBL standard library functions"
        },
        {
          "path": "emscripten/media",
          "mount": "/usr/local/share/pebl2/media",
          "description": "Media assets (images, sounds)"
        }
      ],
      "excludes": [
        "*/.git/*",
        "*~"
      ],
      "options": {
        "use_preload_cache": true,
        "separate_metadata": true,
        "lz4": false
      }
    },

    "core_battery": {
      "name": "core-battery",
      "type": "battery_bundle",
      "description": "Standard PEBL test battery (curated tests from upload-battery)",
      "output_dir": "bin",
      "manifest": "core-battery-manifest.json",
      "includes": [
        {
          "path": "upload-battery",
          "mount": "/usr/local/share/pebl2/battery",
          "description": "Standard test battery"
        }
      ],
      "excludes": [
        "*/data/*",
        "*/.git/*",
        "*~",
        "*.config",
        "*.pbl.png"
      ],
      "options": {
        "use_preload_cache": true,
        "separate_metadata": true,
        "lz4": false
      }
    },

    "test_bundles": [
      {
        "name": "pcst",
        "type": "test_bundle",
        "description": "PEBL Cognitive Screening Test with audio instruction files",
        "output_dir": "bin/test-bundles",
        "includes": [
          {
            "path": "battery/PCST",
            "mount": "/usr/local/share/pebl2/battery/PCST",
            "description": "PCST test files including audio"
          }
        ],
        "excludes": [
          "*/data/*",
          "*~"
        ],
        "options": {
          "use_preload_cache": true,
          "separate_metadata": true,
          "lz4": false
        },
        "size_mb": 5.5,
        "catalog_entry": {
          "base_url": "/runtime/test-bundles",
          "tests": ["pcst"]
        }
      },
      {
        "name": "bcst-64",
        "type": "test_bundle",
        "description": "Berg Card Sort Test - 64 card version with stimulus images",
        "output_dir": "bin/test-bundles",
        "includes": [
          {
            "path": "upload-battery/bcst-64",
            "mount": "/usr/local/share/pebl2/battery/bcst-64",
            "description": "BCST-64 test files including card images"
          }
        ],
        "excludes": [
          "*/data/*",
          "*~",
          "*.pbl.png"
        ],
        "options": {
          "use_preload_cache": true,
          "separate_metadata": true,
          "lz4": false
        },
        "size_mb": 0.6,
        "catalog_entry": {
          "base_url": "/runtime/test-bundles",
          "tests": ["bcst-64"]
        }
      },
      {
        "name": "simon",
        "type": "test_bundle",
        "description": "Simon Task - Spatial stimulus-response compatibility test",
        "output_dir": "bin/test-bundles",
        "includes": [
          {
            "path": "upload-battery/simon",
            "mount": "/usr/local/share/pebl2/battery/simon",
            "description": "Simon task test files"
          }
        ],
        "excludes": [
          "*/data/*",
          "*~",
          "*.pbl.png"
        ],
        "options": {
          "use_preload_cache": true,
          "separate_metadata": true,
          "lz4": false
        },
        "size_mb": 0.1,
        "catalog_entry": {
          "base_url": "/runtime/test-bundles",
          "tests": ["simon"]
        }
      },
      {
        "name": "TNT",
        "type": "test_bundle",
        "description": "Toulouse N-back Task - Working memory test with 0/1/2-back conditions",
        "output_dir": "bin/test-bundles",
        "includes": [
          {
            "path": "upload-battery/TNT",
            "mount": "/usr/local/share/pebl2/battery/TNT",
            "description": "TNT test files"
          }
        ],
        "excludes": [
          "*/data/*",
          "*~",
          "*.pbl.png"
        ],
        "options": {
          "use_preload_cache": true,
          "separate_metadata": true,
          "lz4": false
        },
        "size_mb": 0.1,
        "catalog_entry": {
          "base_url": "/runtime/test-bundles",
          "tests": ["TNT"]
        }
      }
    ]
  }
}
