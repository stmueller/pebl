{
  "version": "1.0",
  "description": "PEBL Bundle Build Configuration - defines all data bundles to be created",
  "_comment": [
    "BUNDLE TYPES:",
    "",
    "1. CORE RUNTIME (pebl2.data) - NOT DEFINED HERE",
    "   - Created by Makefile during 'make em-opt' via --preload-file flags",
    "   - Contains: emscripten/pebl-lib/*.pbl and emscripten/media/*",
    "   - Size: ~3MB (fonts, images, sounds, standard library)",
    "   - Always loaded automatically with pebl2.js",
    "   - DO NOT recreate this as a bundle - it's already embedded in the main build",
    "",
    "2. BATTERY BUNDLES (core-battery.data)",
    "   - Curated collections of tests for specific purposes",
    "   - Uses 'manifest' field to specify which tests to include from upload-battery/",
    "   - May be auto-loaded by default for all users",
    "   - Example: core-battery includes ~44 standard tests",
    "",
    "3. INDIVIDUAL TEST BUNDLES (test-bundles/*.data)",
    "   - Single tests or small test collections that are large or specialized",
    "   - Loaded on-demand when user runs that specific test",
    "   - Stored in bin/test-bundles/ directory",
    "   - Examples: pcst (5.5MB with audio), bcst-64, simon, TNT, luckvogel",
    "",
    "4. PRIVATE/RESTRICTED BUNDLES (private_uploads.data)",
    "   - Tests requiring individual access grants",
    "   - Stored in bin/ (not test-bundles/)",
    "   - Loaded only for authorized users",
    "   - Example: private_uploads contains MRT and spatialgrid"
  ],

  "bundles": {

    "core_battery": {
      "name": "core-battery",
      "type": "battery_bundle",
      "description": "Standard PEBL test battery (curated tests from upload-battery)",
      "output_dir": "bin",
      "manifest": "core-battery-manifest.json",
      "includes": [
        {
          "path": "upload-battery",
          "mount": "/usr/local/share/pebl2/battery",
          "description": "Standard test battery"
        }
      ],
      "excludes": [
        "*/data/*",
        "*/.git/*",
        "*~",
        "*.config",
        "*.pbl.png"
      ],
      "options": {
        "use_preload_cache": true,
        "separate_metadata": true,
        "lz4": false
      }
    },

    "test_bundles": [
      {
        "name": "pcst",
        "type": "test_bundle",
        "description": "PEBL Cognitive Screening Test with audio instruction files",
        "output_dir": "bin/test-bundles",
        "includes": [
          {
            "path": "battery/PCST",
            "mount": "/usr/local/share/pebl2/battery/PCST",
            "description": "PCST test files including audio"
          }
        ],
        "excludes": [
          "*/data/*",
          "*~"
        ],
        "options": {
          "use_preload_cache": true,
          "separate_metadata": true,
          "lz4": false
        },
        "size_mb": 5.5,
        "catalog_entry": {
          "base_url": "/runtime/test-bundles",
          "tests": ["pcst"]
        }
      },
      {
        "name": "bcst-64",
        "type": "test_bundle",
        "description": "Berg Card Sort Test - 64 card version with stimulus images",
        "output_dir": "bin/test-bundles",
        "includes": [
          {
            "path": "upload-battery/bcst-64",
            "mount": "/usr/local/share/pebl2/battery/bcst-64",
            "description": "BCST-64 test files including card images"
          }
        ],
        "excludes": [
          "*/data/*",
          "*~",
          "*.pbl.png"
        ],
        "options": {
          "use_preload_cache": true,
          "separate_metadata": true,
          "lz4": false
        },
        "size_mb": 0.6,
        "catalog_entry": {
          "base_url": "/runtime/test-bundles",
          "tests": ["bcst-64"]
        }
      },
      {
        "name": "simon",
        "type": "test_bundle",
        "description": "Simon Task - Spatial stimulus-response compatibility test",
        "output_dir": "bin/test-bundles",
        "includes": [
          {
            "path": "upload-battery/simon",
            "mount": "/usr/local/share/pebl2/battery/simon",
            "description": "Simon task test files"
          }
        ],
        "excludes": [
          "*/data/*",
          "*~",
          "*.pbl.png"
        ],
        "options": {
          "use_preload_cache": true,
          "separate_metadata": true,
          "lz4": false
        },
        "size_mb": 0.1,
        "catalog_entry": {
          "base_url": "/runtime/test-bundles",
          "tests": ["simon"]
        }
      },
      {
        "name": "TNT",
        "type": "test_bundle",
        "description": "Toulouse N-back Task - Working memory test with 0/1/2-back conditions",
        "output_dir": "bin/test-bundles",
        "includes": [
          {
            "path": "upload-battery/TNT",
            "mount": "/usr/local/share/pebl2/battery/TNT",
            "description": "TNT test files"
          }
        ],
        "excludes": [
          "*/data/*",
          "*~",
          "*.pbl.png"
        ],
        "options": {
          "use_preload_cache": true,
          "separate_metadata": true,
          "lz4": false
        },
        "size_mb": 0.1,
        "catalog_entry": {
          "base_url": "/runtime/test-bundles",
          "tests": ["TNT"]
        }
      },
      {
        "name": "luckvogel",
        "type": "test_bundle",
        "description": "Luck & Vogel Visual Change Detection - Visual working memory capacity test",
        "output_dir": "bin/test-bundles",
        "includes": [
          {
            "path": "upload-battery/luckvogel",
            "mount": "/usr/local/share/pebl2/battery/luckvogel",
            "description": "Luck & Vogel test files"
          }
        ],
        "excludes": [
          "*/data/*",
          "*~",
          "*.pbl.png"
        ],
        "options": {
          "use_preload_cache": true,
          "separate_metadata": true,
          "lz4": false
        },
        "size_mb": 0.1,
        "catalog_entry": {
          "base_url": "/runtime/test-bundles",
          "tests": ["luckvogel"]
        }
      },
	      {
        "name": "maze",
        "type": "test_bundle",
        "description": "PEBL maze-solving task. Tests visual-spatial planning and problem solving",
        "output_dir": "bin/test-bundles",
        "includes": [
          {
            "path": "upload-battery/maze",
            "mount": "/usr/local/share/pebl2/battery/maze",
            "description": "Maze Solving Task test files"
          }
        ],
        "excludes": [
          "*/data/*",
          "*~",
          "*.pbl.png"
        ],
        "options": {
          "use_preload_cache": true,
          "separate_metadata": true,
          "lz4": false
        },
        "size_mb": 0.1,
        "catalog_entry": {
          "base_url": "/runtime/test-bundles",
          "tests": ["maze"]
        }
	      },
      {
        "name": "matrixrotation",
        "type": "test_bundle",
        "description": "Matrix Rotation - Mental imagery task for spatial rotation ability",
        "output_dir": "bin/test-bundles",
        "includes": [
          {
            "path": "upload-battery/matrixrotation",
            "mount": "/usr/local/share/pebl2/battery/matrixrotation",
            "description": "Matrix Rotation test files"
          }
        ],
        "excludes": [
          "*/data/*",
          "*~",
          "*.pbl.png"
        ],
        "options": {
          "use_preload_cache": true,
          "separate_metadata": true,
          "lz4": false
        },
        "size_mb": 0.1,
        "catalog_entry": {
          "base_url": "/runtime/test-bundles",
          "tests": ["matrixrotation"]
        }
      },
      {
        "name": "globallocal",
        "type": "test_bundle",
        "description": "Global-Local Processing Task - Navon hierarchical letter task testing attention and processing",
        "output_dir": "bin/test-bundles",
        "includes": [
          {
            "path": "upload-battery/globallocal",
            "mount": "/usr/local/share/pebl2/battery/globallocal",
            "description": "Global-Local task files including multiple stimuli sets and translations"
          }
        ],
        "excludes": [
          "*/data/*",
          "*~",
          "*.pbl.png"
        ],
        "options": {
          "use_preload_cache": true,
          "separate_metadata": true,
          "lz4": false
        },
        "size_mb": 0.2,
        "catalog_entry": {
          "base_url": "/runtime/test-bundles",
          "tests": ["globallocal"]
        }
      },
      {
        "name": "ptrails",
        "type": "test_bundle",
        "description": "PEBL Trails Test - Trail-making task with multiple display types and path optimization",
        "output_dir": "bin/test-bundles",
        "includes": [
          {
            "path": "upload-battery/ptrails",
            "mount": "/usr/local/share/pebl2/battery/ptrails",
            "description": "PEBL Trails test files with example data and HTML reports"
          }
        ],
        "excludes": [
          "*/data/[!a]*",
          "*~",
          "*.pbl.png"
        ],
        "options": {
          "use_preload_cache": true,
          "separate_metadata": true,
          "lz4": false
        },
        "size_mb": 0.1,
        "catalog_entry": {
          "base_url": "/runtime/test-bundles",
          "tests": ["ptrails"]
        }
      },
      {
        "name": "private_uploads",
        "type": "test_bundle",
        "description": "Private tests requiring individual access grants (MRT, spatialgrid)",
        "output_dir": "bin",
        "includes": [
          {
            "path": "private_tasks/MRT",
            "mount": "/usr/local/share/pebl2/private_battery/MRT",
            "description": "Mental Rotation Test"
          },
          {
            "path": "private_tasks/spatialgrid",
            "mount": "/usr/local/share/pebl2/private_battery/spatialgrid",
            "description": "Spatial Grid Memory Test"
          }
        ],
        "excludes": [
          "*/data/*",
          "*~",
          "*.pbl.png",
          "*.csv"
        ],
        "options": {
          "use_preload_cache": true,
          "separate_metadata": true,
          "lz4": false
        },
        "size_mb": 3.6,
        "catalog_entry": {
          "base_url": "/runtime",
          "tests": ["MRT", "spatialgrid"]
        }
      }
    ]
  }
}
