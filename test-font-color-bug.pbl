## Test case to reproduce font color assignment crash
## This tests repeated assignment to font.fgcolor property

define Start(p)
{
  gWin <- MakeWindow("black")

  Print("Creating label with initial font colors...")
  label <- EasyLabel("Test Label", 400, 300, gWin, 28)
  label.font.bgcolor <- MakeColor("lightgray")
  label.font.fgcolor <- MakeColor("black")
  Draw()

  Print("Initial creation successful. Press any key to continue.")
  WaitForAnyKeyPress()

  Print("Now trying to reassign font.fgcolor (this may crash)...")
  label.font.fgcolor <- MakeColor("black")
  Draw()

  Print("First reassignment successful. Press any key to continue.")
  WaitForAnyKeyPress()

  Print("Trying second reassignment...")
  label.font.fgcolor <- MakeColor("red")
  Draw()

  Print("Second reassignment successful. Press any key to continue.")
  WaitForAnyKeyPress()

  Print("Trying third reassignment back to black...")
  label.font.fgcolor <- MakeColor("black")
  Draw()

  Print("Third reassignment successful. Press any key to continue.")
  WaitForAnyKeyPress()

  Print("Trying assignment in a loop...")
  loop(i, Sequence(1, 5, 1))
  {
    Print("Loop iteration " + i)
    label.font.fgcolor <- MakeColor("black")
    Draw()
    Wait(200)
  }

  Print("Loop assignments successful!")
  Print("Test complete - no crash detected.")
  WaitForAnyKeyPress()
}
